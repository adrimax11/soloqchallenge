<script>
    import fetch from 'node-fetch';

    import jugadores from './jugadores.json';

    async function obtenerElo(cuenta) {
        const apiKey = process.env.RIOT_API_KEY; // Utiliza la API key de .env llamada RIOT_API_KEY
        const region = 'euw1'; // Reemplaza con la región correspondiente

        const response = await fetch(`https://${region}.api.riotgames.com/lol/summoner/v4/summoners/by-name/${cuenta}?api_key=${apiKey}`);
        const summonerData = await response.json();

        const summonerId = summonerData.id;

        const rankedResponse = await fetch(`https://${region}.api.riotgames.com/lol/league/v4/entries/by-summoner/${summonerId}?api_key=${apiKey}`);
        const rankedData = await rankedResponse.json();

        if (rankedData.length > 0) {
            const elo = rankedData[0].tier;
            return elo;
        } else {
            return 'Sin clasificar';
        }
    }

    jugadores.forEach(async (jugador) => {
        const cuenta = jugador.cuenta;
        const elo = await obtenerElo(cuenta);
        jugador.elo = elo;
    });

    console.log(jugadores); // Puedes eliminar esta línea si no necesitas imprimir los jugadores actualizados

    // Aquí puedes guardar los jugadores actualizados en el archivo jugadores.json

</script>
    
